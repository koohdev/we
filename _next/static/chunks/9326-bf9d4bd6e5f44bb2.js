"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9326],{52094:function(e,t,s){s.r(t),s.d(t,{ConnectWalletModal:function(){return A},ConnectionProvider:function(){return n},RenderWalletBody:function(){return D},WalletState:function(){return i},getWalletProviderInfo:function(){return M}});var a,l,n,i,r=s(3827),c=s(9151),o=s(1811),d=s(64090),m=s(92815),g=s(85126),u=s(37826),x=s(33383),p=s(98055),h=s(78595),f=s(49286),j=e=>{let{imageUrl:t,label:s,loadingImage:a,setWalletState:l,isNewUser:n,previousWalletState:c}=e,{address:o,connector:m}=(0,p.Pk)(),[j,v]=(0,d.useState)(""),{chain:w}=(0,p.ZQ)(),y=null==w?void 0:w.id,{userToken:b,userProfile:N,onWalletLogin:S}=(0,u.useUserProfileContext)(),[k,C]=(0,d.useState)(new Date().toISOString()),I=(0,d.useRef)(!1),W=(0,d.useCallback)(async e=>{if(!o)return;let t=await(0,x.Wj)(o,e,JSON.stringify({message:{message:"Unitap Sign In",URI:"https://unitap.app",IssuedAt:k},primaryType:"Unitap",account:o,domain:{name:"Unitap Connect",version:"1",chainId:null!=y?y:1,verifyingContract:"0x0000000000000000000000000000000000000000"},types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Unitap:[{name:"message",type:"string"},{name:"URI",type:"string"},{name:"IssuedAt",type:"string"}]},onSuccess:W}));S(t.token,t),l(c===i.AddNewWallet?i.AddWalletSuccess:n?i.SetUsername:i.LoggedIn)},[o,y,n,k,S,c,l]),{isError:U,signTypedDataAsync:P}=(0,h.useSignTypedData)({});return((0,d.useEffect)(()=>{if(!I.current&&o)return console.log(m),P({message:{message:"Unitap Sign In",URI:"https://unitap.app",IssuedAt:k},domain:{name:"Unitap Connect",version:"1",chainId:null!=y?y:1,verifyingContract:"0x0000000000000000000000000000000000000000"},types:{Unitap:[{name:"message",type:"string"},{name:"URI",type:"string"},{name:"IssuedAt",type:"string"}]},primaryType:"Unitap"}).then(e=>W(e)).catch(e=>{console.warn(e),v(e.message)}),I.current=!0,()=>{}},[o,y,m,k,W,P]),j)?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"h-32 w-32 mx-auto bg-[#4C4C5C] rounded-full flex items-center justify-center",children:(0,r.jsx)(g.Z,{iconSrc:t,alt:s,width:"60px",height:"60px"})}),(0,r.jsx)("p",{className:"font-semibold text-warn mt-8",children:"Sign message Failed"}),(0,r.jsx)("p",{className:"mt-2 text-gray100 text-xs",children:j}),(0,r.jsx)(f.PL,{onClick:()=>{C(new Date().toISOString()),I.current=!1,v("")},className:"mx-auto !w-full mt-7",children:(0,r.jsx)("p",{children:"Try Again"})})]})}):(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"h-32 w-32 mx-auto bg-[#4C4C5C] rounded-full flex items-center justify-center",children:[(0,r.jsx)(g.Z,{alt:"loading",iconSrc:a,width:"128px",height:"128px",className:"animate-spin absolute"}),(0,r.jsx)(g.Z,{iconSrc:t,alt:s,width:"60px",height:"60px"})]}),(0,r.jsx)("p",{className:"font-bold mt-8",children:"Waiting..."}),(0,r.jsx)("p",{className:"text-gray100 text-xs mt-6 mb-12",children:"Please sign the message in your wallet to complete the authentication process."})]})},v=s(30522),w=e=>{let{setWalletState:t}=e,{address:s}=(0,p.Pk)(),a=(0,d.useRef)();return(0,d.useEffect)(()=>{s&&(a.current||(a.current=s),s!==a.current&&t(i.Prompt))},[s,t]),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(g.Z,{iconSrc:"/assets/images/modal/unitap-welcome.svg",alt:"unitap space"}),(0,r.jsx)("p",{className:"font-semibold mt-3",children:"Are you a new user?"}),(0,r.jsxs)("p",{className:"mt-5 text-gray100 text-sm leading-6",children:["If you already have a ",(0,r.jsx)("span",{className:"text-blue-200",children:"Unitap "}),"account, you can add this wallet"," ",(0,r.jsxs)("span",{className:"underline",children:["(",(0,v.Xn)(s),")"]})," to your existing account but if you are a new user, you can register as new."]}),(0,r.jsx)(f.PL,{onClick:()=>t(i.SignMessage),className:"!w-full mb-5 mt-5 before:!inset-[1px]",children:(0,r.jsx)("p",{className:"font-bold text-base",children:"Register as New User"})}),(0,r.jsx)("p",{className:"underline mb-2 cursor-pointer",onClick:()=>t(i.AddNewWallet),children:"Add Wallet to an Existing Account"})]})},y=s(20703),b=s(83932),N=e=>{let{setWalletProvider:t,setWalletState:s}=e,{connect:a,connectors:l,isSuccess:c}=(0,p.Ru)(),{disconnect:o}=(0,b.useDisconnect)(),{address:u}=(0,p.Pk)();return(0,d.useEffect)(()=>{o&&o()},[o]),(0,d.useEffect)(()=>{c&&u&&(0,x.cy)(u).then(e=>{s(e?i.SignMessage:i.AddWalletFailed)})},[u,c,s]),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(y.default,{src:"/assets/images/provider-dashboard/arrow-left.svg",alt:"back",className:"absolute top-5 left-4 cursor-pointer",height:14,width:19,onClick:()=>s(i.UnknownWallet)}),(0,r.jsx)(g.Z,{iconSrc:"/assets/images/wallets.svg",alt:"wallets"}),(0,r.jsx)("p",{className:"font-semibold mt-3",children:"Login"}),(0,r.jsx)("p",{className:"mt-5 text-gray100 text-sm",children:"Here you have to connect to a wallet that is connected to an existing account."}),(0,r.jsx)(m.H,{className:"from-[#F5841F33] mt-8",label:"MetaMask",imageIcon:"/assets/images/modal/metamask-icon.svg",backgroundImage:"/assets/images/modal/metamask-bg.svg",onClick:()=>{t(n.Metamask),a({connector:l.find(e=>"injected"===e.id)})}}),(0,r.jsx)(m.H,{className:"from-[#16436f] mt-3",label:"WalletConnect",backgroundImage:"/assets/images/modal/walletconnect-bg.svg",imageIcon:"/assets/images/modal/walletconnect-icon.svg",onClick:()=>{t(n.Walletconnect),a({connector:l.find(e=>"walletConnect"===e.id)})}})]})},S=s(384),k=s(40376),C=e=>{let{setWalletState:t}=e,{address:s}=(0,p.Pk)(),{userToken:a,updateUsername:l,userProfile:n}=(0,u.useUserProfileContext)(),[c,o]=(0,d.useState)(""),[m,g]=(0,d.useState)(!1),[h,j]=(0,d.useState)(""),v=async()=>{if(s&&a){j(""),g(!0);try{await(0,x.bE)(c,a),l(c),t(i.LoggedIn)}catch(e){if(!(e instanceof k.d7)||!e.response)return;j(e.response.data.message)}finally{g(!1)}}};return(0,d.useEffect)(()=>{let e=setTimeout(()=>{a&&c!==(null==n?void 0:n.username)&&c&&(g(!0),(0,x.F6)(c,a).catch(e=>{if(e instanceof k.d7){var t,s,a;j((null===(t=e.response)||void 0===t?void 0:t.data.message)||(null===(a=e.response)||void 0===a?void 0:null===(s=a.data.username)||void 0===s?void 0:s[0]));return}j(e.message)}).finally(()=>g(!1)))},300);return j(""),()=>clearTimeout(e)},[null==n?void 0:n.username,a,c]),(0,r.jsxs)("div",{className:"text-center w-full",children:[(0,r.jsx)(y.default,{className:"mx-auto",src:"/assets/images/navbar/logo.svg",alt:"unitap",height:128,width:112}),(0,r.jsx)("p",{className:"font-semibold mt-3",children:"Set a username"}),(0,r.jsx)("p",{className:"mt-2 text-gray100 text-sm leading-6",children:"This username is unique and public."}),(0,r.jsxs)("div",{className:"search-input mt-5 relative bg-gray60 rounded-2xl",children:[(0,r.jsx)(S.Z,{className:"text-gray100 !m-0 placeholder:text-gray90 !bg-gray60 border-gray70 border-2 rounded-2xl ".concat(h?"border-error":"border-gray70"),$width:"100%",$fontSize:"14px",placeholder:"Username",value:c,onChange:e=>o(e.target.value),$pl:2,$p:2,$mb:0}),(0,r.jsx)("span",{className:"icon-right text-gray90 absolute right-4 top-1/2 -translate-y-1/2 z-10",children:"@"})]}),!!h&&(0,r.jsx)("p",{className:"text-xs text-left pl-2 text-error",children:h}),(0,r.jsx)(f.PL,{onClick:v,className:"!w-full mt-10 disabled:opacity-60",disabled:m||!c||!!h,children:(0,r.jsx)("p",{className:"font-semibold",children:m?"Loading...":"Start the Journey"})})]})},I=()=>{let{userProfile:e}=(0,u.useUserProfileContext)(),{setIsWalletPromptOpen:t,isWalletPromptOpen:s}=(0,o.useGlobalContext)(),{address:a}=(0,p.Pk)();return(0,d.useEffect)(()=>{let e=setTimeout(()=>{t(!1)},3e3);return()=>{clearTimeout(e)}},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{iconSrc:"/assets/images/modal/space-like.svg",alt:"unitap like"}),(0,r.jsx)("div",{className:"flex items-center mt-4 text-space-green",children:(0,r.jsx)("p",{children:"Logged in Successfully!"})}),(0,r.jsxs)("p",{className:"mt-3 text-sm text-center text-gray100",children:["Welcome Back @",null==e?void 0:e.username,". Now you can go to your profile and add ",(0,v.Xn)(a)," to your account."]}),(0,r.jsx)(f.PL,{className:"!w-full mt-8",children:(0,r.jsx)("p",{className:"font-semibold",children:"Go to Profile"})})]})},W=e=>{let{setWalletState:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{iconSrc:"/assets/images/modal/unitap-error.svg",alt:"error"}),(0,r.jsx)("div",{className:"flex items-center mt-4 text-error",children:(0,r.jsx)("p",{children:"We didnâ€™t recognize your wallet!"})}),(0,r.jsx)("p",{className:"mt-3 text-sm text-center text-gray100",children:"There seems to be no Unitap account with the wallet (0x8753...34h6)."}),(0,r.jsx)(f.PL,{onClick:()=>{t(i.UnknownWallet)},className:"!w-full mt-8",children:(0,r.jsx)("p",{className:"font-semibold",children:"Go Back"})})]})},U=e=>{var t;let{isNewUser:s}=e,{connector:a,address:l}=(0,p.Pk)(),{userProfile:i}=(0,u.useUserProfileContext)(),{setIsWalletPromptOpen:c,isWalletPromptOpen:m}=(0,o.useGlobalContext)(),x=M((null==a?void 0:a.id)==="injected"?n.Metamask:n.Walletconnect);return(0,d.useEffect)(()=>{let e=setTimeout(()=>{c(!1)},3e3);return()=>{clearTimeout(e)}},[c]),(0,r.jsxs)("div",{className:"text-sm text-center w-full",children:[(0,r.jsxs)("div",{className:"h-32 w-32 mx-auto bg-[#4C4C5C] border-2 border-space-green rounded-full relative flex items-center justify-center",children:[(0,r.jsx)(g.Z,{iconSrc:x.imageUrl,alt:x.label,width:"60px",height:"60px"}),(0,r.jsx)(g.Z,{iconSrc:"/assets/images/check-circle-space-green.svg",alt:"check green",className:"absolute -right-2 bottom-4",width:"28px",height:"28px"})]}),(0,r.jsxs)("div",{className:"mt-10 font-semibold justify-center text-space-green flex items-center",children:[(0,r.jsx)(g.Z,{iconSrc:"/assets/images/check-circle-space-green.svg",alt:"check green",className:"mr-2",width:"20px",height:"20px"}),"Logged in Successfully!"]}),(0,r.jsxs)("p",{className:"mt-2 mb-16 text-gray100",children:["Hii, ",s?"welcome":"welcome back"," @",null!==(t=null==i?void 0:i.username)&&void 0!==t?t:(0,v.Xn)(l)," :",")"]})]})},P=s(59367);(a=n||(n={}))[a.Metamask=0]="Metamask",a[a.Walletconnect=1]="Walletconnect";let M=e=>0===e?{imageUrl:"/assets/images/modal/metamask-icon.svg",label:"Metamask",loadingImage:"/assets/images/modal/wallet-metamask-loading.svg"}:{imageUrl:"/assets/images/modal/walletconnect-icon.svg",label:"WalletConnect",loadingImage:"/assets/images/modal/wallet-connect-loading.svg"},D=e=>{let{setWalletTitle:t}=e,[s,a]=(0,d.useState)(0),[l,n]=(0,d.useState)(null),i=(0,d.useMemo)(()=>(0,P.j)(),[]),[c,o]=(0,d.useState)(!1),[g,u]=(0,d.useState)(0),x=(0,d.useMemo)(()=>0===g?{imageUrl:"/assets/images/modal/metamask-icon.svg",label:"Metamask",loadingImage:"/assets/images/modal/wallet-metamask-loading.svg"}:{imageUrl:"/assets/images/modal/walletconnect-icon.svg",label:"WalletConnect",loadingImage:"/assets/images/modal/wallet-connect-loading.svg"},[g]),p=e=>{n(s),a(e)};return((0,d.useEffect)(()=>{"false"!==i.tutorial&&c&&(document.cookie="tutorial=true;")},[i,c]),(0,d.useEffect)(()=>{t(Z[s])},[t,s]),0===s)?(0,r.jsx)(m.Z,{setWalletState:e=>{n(s),a(e)},setIsNewUser:o,setWalletProvider:u}):1===s?(0,r.jsx)(j,{previousWalletState:l,isNewUser:c,imageUrl:x.imageUrl,label:x.label,loadingImage:x.loadingImage,setWalletState:p}):6===s?(0,r.jsx)(w,{setWalletState:p}):7===s?(0,r.jsx)(N,{setWalletState:p,setWalletProvider:u}):5===s?(0,r.jsx)(U,{isNewUser:c}):4===s?(0,r.jsx)(C,{setWalletState:p,walletProvider:g}):9===s?(0,r.jsx)(I,{}):8===s?(0,r.jsx)(W,{setWalletState:p}):void 0};(l=i||(i={}))[l.Prompt=0]="Prompt",l[l.SignMessage=1]="SignMessage",l[l.MetamaskSignMessage=2]="MetamaskSignMessage",l[l.WalletConnectSignMessage=3]="WalletConnectSignMessage",l[l.SetUsername=4]="SetUsername",l[l.LoggedIn=5]="LoggedIn",l[l.UnknownWallet=6]="UnknownWallet",l[l.AddNewWallet=7]="AddNewWallet",l[l.AddWalletFailed=8]="AddWalletFailed",l[l.AddWalletSuccess=9]="AddWalletSuccess";let Z={0:"Conenct Wallet",1:"Conenct Wallet",2:"Connect Metamask",3:"Connect WalletConnect",5:"Conenct Wallet",6:"Select Wallet State",7:"Add Wallet to an Existing Account",4:"Register",8:"Conenct Wallet",9:"Adding wallet"},A=()=>{let{isWalletPromptOpen:e,setIsWalletPromptOpen:t}=(0,o.useGlobalContext)(),[s,a]=(0,d.useState)(Z[0]),{disconnect:l,isPending:n}=(0,b.useDisconnect)();return(0,d.useEffect)(()=>{e&&l()},[l,e]),(0,r.jsx)(c.Z,{title:s,size:"small",isOpen:e&&!n,closeModalHandler:()=>t(!1),children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-center pt-12",children:(0,r.jsx)(D,{setWalletTitle:e=>a(e)})})})}},92815:function(e,t,s){s.d(t,{H:function(){return d}});var a=s(3827),l=s(85126),n=s(98055),i=s(8792),r=s(64090),c=s(52094),o=s(33383);let d=e=>{let{backgroundImage:t,imageIcon:s,label:n,className:i,onClick:r}=e;return(0,a.jsx)("button",{"data-testid":"wallet-connect-method-".concat(n),onClick:r,className:"bg-gradient-to-r w-full rounded-[14px] p-[2px] ".concat(i," to-gray60 to-30%"),children:(0,a.jsxs)("div",{className:"bg-gray30 rounded-xl flex overflow-hidden items-center",children:[(0,a.jsx)(l.Z,{iconSrc:s,width:"28px",height:"28px",className:"ml-3 my-3"}),(0,a.jsx)("span",{className:"ml-5 font-bold text-sm",children:n}),(0,a.jsx)(l.Z,{className:"ml-auto",iconSrc:t})]})})};t.Z=e=>{let{setWalletProvider:t,setWalletState:s,setIsNewUser:m}=e,{connect:g,connectors:u,disconnect:x,isSuccess:p,isLoading:h}=(0,n.Ru)(),{address:f}=(0,n.Pk)();return(0,r.useEffect)(()=>{f&&(0,o.cy)(f).then(e=>{m(!e),s(e?c.WalletState.SignMessage:c.WalletState.UnknownWallet)})},[f,m,s,p,x]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{iconSrc:"/assets/images/wallets.svg",alt:"wallets"}),(0,a.jsx)("p",{className:"mt-5 text-gray100 text-sm",children:"Select what wallet you want to connect below:"}),(0,a.jsx)(d,{className:"from-[#F5841F33] mt-8",label:"MetaMask",imageIcon:"/assets/images/modal/metamask-icon.svg",backgroundImage:"/assets/images/modal/metamask-bg.svg",onClick:()=>{t(c.ConnectionProvider.Metamask),g({connector:u.find(e=>"injected"===e.id)})}}),(0,a.jsx)(d,{className:"from-[#16436f] mt-3",label:"WalletConnect",backgroundImage:"/assets/images/modal/walletconnect-bg.svg",imageIcon:"/assets/images/modal/walletconnect-icon.svg",onClick:()=>{t(c.ConnectionProvider.Walletconnect),g({connector:u.find(e=>"walletConnect"===e.id)})}}),(0,a.jsxs)("div",{className:"mt-10 text-sm flex items-center text-gray100",children:[(0,a.jsx)("p",{children:"New to Ethereum wallets?"}),(0,a.jsx)(i.default,{className:"text-white ml-1 underline",href:"https://ethereum.org/en/wallets/",target:"_blank",children:"Learn more"}),(0,a.jsx)(l.Z,{iconSrc:"/assets/images/prize-tap/ic_link_white.svg",className:"ml-1"})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray90",children:["By continuing, you agree to our"," ",(0,a.jsx)(i.default,{target:"_blank",href:"https://guild.xyz/privacy-policy",className:"underline",children:"Privacy Policy"})]})]})}},384:function(e,t,s){s.d(t,{Z:function(){return m}});var a=s(3827),l=s(57426),n=s(9137);s(64090);var i=s(85126);let r=l.ZP.p.withConfig({componentId:"sc-94098669-0"})(["font-size:12px;color:#4c4c64;margin:","px ","px ","px;"],3*n.DV.sizes.baseMargin,n.DV.sizes.baseMargin,n.DV.sizes.baseMargin);var c=e=>{let{children:t}=e;return(0,a.jsx)(r,{children:t})};let o=l.ZP.input.withConfig({componentId:"sc-c2c9a30-0"})(["padding:","px;padding-left:","px;width:",";width:100%;color:white;background:",";background:",";border-radius:","px;border:1px solid ",";z-index:1;font-size:",";::placeholder,:-ms-input-placeholder,::-ms-input-placeholder{color:",";font-weight:400;font-size:14px;}"],e=>{let{$p:t}=e;return t?n.DV.sizes.basePadding*t:1.5*n.DV.sizes.basePadding},e=>{let{$pl:t}=e;return t?n.DV.sizes.basePadding*t:1.5*n.DV.sizes.basePadding},e=>{let{$width:t}=e;return t||"auto"},e=>{let{$styleType:t}=e;return"success"===t?n.DV.colors.darkgreen:n.DV.colors.dark},e=>{let{$backgroundColor:t}=e,s=Object.keys(n.DV.colors).find(e=>e===t);return s?"".concat(n.DV.colors[s],"!important"):""},n.DV.sizes.baseRadius,e=>{let{$styleType:t}=e;return"success"===t?n.DV.colors.green:"unset"},e=>{let{$fontSize:t}=e;return t||"1em"},e=>{let{$styleType:t}=e;return"success"===t?n.DV.colors.placeholderGreen:n.DV.colors.gray}),d=l.ZP.div.withConfig({componentId:"sc-c2c9a30-1"})(["width:",";display:flex;flex-direction:column;color:white;border-radius:","px;margin-bottom:",";position:relative;height:auto;color:",";.input-icon{position:absolute;left:","px;bottom:50%;transform:translateY(50%);z-index:10;}.input-postfix{position:absolute;right:","px;bottom:20%;font-size:12px;color:",";z-index:1;}"],e=>{let{$width:t}=e;return t||"auto"},n.DV.sizes.baseRadius,e=>{let{$mb:t}=e;return void 0!==t?"".concat(t*n.DV.sizes.baseMargin,"px"):"1rem"},n.DV.colors.gray80,2*n.DV.sizes.basePadding,4*n.DV.sizes.basePadding,n.DV.colors.space_green);var m=e=>{let{$icon:t,$width:s,$iconWidth:l,$iconHeight:n,$postfix:r,$label:m,testid:g,$mb:u}=e;return(0,a.jsxs)(d,{$width:s,$mb:u,children:[m&&(0,a.jsx)(c,{children:m}),t&&(0,a.jsx)(i.Z,{iconSrc:t,width:l,height:n,className:"input-icon"}),(0,a.jsx)(o,{"data-testid":g,...e}),r&&(0,a.jsx)("p",{className:"input-postfix",children:r})]})}},69326:function(e,t,s){s.r(t),s.d(t,{WalletManagementContext:function(){return b},default:function(){return S},useWalletManagementContext:function(){return N}});var a=s(3827),l=s(85126),n=s(9151),i=s(92815),r=s(98055),c=s(83932),o=s(64090),d=s(37826),m=s(33383),g=s(78595),u=s(49286),x=s(35922),p=s(40376),h=e=>{let{imageUrl:t,label:s,loadingImage:n,setWalletState:i,error:c,setError:h,setIsConnected:f,setAddModalState:j}=e,{address:v}=(0,r.Pk)(),{chain:w}=(0,r.ZQ)(),y=null==w?void 0:w.id,{userToken:b,userProfile:S,addNewWallet:k}=(0,d.useUserProfileContext)(),{duplicateWalletRaiseError:C}=N(),[I,W]=(0,o.useState)(new Date().toISOString()),[U,P]=(0,o.useState)(null),M=(0,o.useRef)(!1),D=(0,o.useCallback)(async e=>{if(!v||!b)return;let t=await(0,m.rG)(b,v,"EVM",JSON.stringify({message:{message:"Unitap Sign In",URI:"https://unitap.app",IssuedAt:I},primaryType:"Unitap",account:v,domain:{name:"Unitap Connect",version:"1",chainId:null!=y?y:1,verifyingContract:"0x0000000000000000000000000000000000000000"},types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Unitap:[{name:"message",type:"string"},{name:"URI",type:"string"},{name:"IssuedAt",type:"string"}]}}),e);k(v,t.pk),j("complete")},[k,v,y,I,j,b]),{isError:Z,signTypedDataAsync:A,variables:E}=(0,g.useSignTypedData)({});(0,o.useEffect)(()=>{if(v){if(null==S?void 0:S.wallets.find(e=>(0,x.E)(e.address,v))){P(v);return}(0,m.cy)(v).then(e=>{e?h("This wallet is already added to another account, please enter a different wallet"):P(v)})}},[v,h,null==S?void 0:S.wallets]),(0,o.useEffect)(()=>{if(!M.current&&v&&U&&(0,x.E)(v,U)){if(null==S?void 0:S.wallets.find(e=>(0,x.E)(e.address,v))){C?h("This wallet is already added to your account, please enter a different wallet"):j("complete");return}return A({message:{message:"Unitap Sign In",URI:"https://unitap.app",IssuedAt:I},primaryType:"Unitap",domain:{name:"Unitap Connect",version:"1",chainId:null!=y?y:1,verifyingContract:"0x0000000000000000000000000000000000000000"},types:{Unitap:[{name:"message",type:"string"},{name:"URI",type:"string"},{name:"IssuedAt",type:"string"}]}}).then(e=>D(e)).catch(e=>{if(e instanceof p.d7){var t,s,a,l,n;let i=null===(t=e.response)||void 0===t?void 0:t.data;h(null!==(n=null!==(l=null===(s=i.address)||void 0===s?void 0:s[0])&&void 0!==l?l:null===(a=i.message)||void 0===a?void 0:a[0])&&void 0!==n?n:e.message)}else h(e.message)}),M.current=!0,()=>{}}},[v,y,C,U,I,D,j,h,A,null==S?void 0:S.wallets]);let z=c.startsWith("This wallet is already added");return c?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-32 w-32 mx-auto bg-[#4C4C5C] rounded-full flex items-center justify-center",children:(0,a.jsx)(l.Z,{iconSrc:t,alt:s,width:"60px",height:"60px"})}),(0,a.jsx)("p",{className:"font-semibold text-warn mt-8",children:z?"Wallet is duplicate":"Sign message Failed"}),(0,a.jsx)("p",{className:"mt-2 text-gray100 text-xs",children:c}),(0,a.jsx)(u.PL,{onClick:()=>{f(!1),W(new Date().toISOString()),M.current=!1,h("")},className:"mx-auto !w-full mt-7",children:(0,a.jsx)("p",{children:"Try Again"})})]})}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"h-32 w-32 mx-auto bg-[#4C4C5C] rounded-full flex items-center justify-center",children:[(0,a.jsx)(l.Z,{alt:"loading",iconSrc:n,width:"128px",height:"128px",className:"animate-spin absolute"}),(0,a.jsx)(l.Z,{iconSrc:t,alt:s,width:"60px",height:"60px"})]}),(0,a.jsx)("p",{className:"font-bold mt-8",children:"Waiting..."}),(0,a.jsx)("p",{className:"text-gray100 text-xs mt-6 mb-12",children:"Please sign the message in your wallet to complete the authentication process."})]})};let f=()=>{let{connect:e,connectors:t,isSuccess:s}=(0,r.Ru)(),[n,d]=(0,o.useState)(!1),{disconnect:m}=(0,c.useDisconnect)();return((0,o.useEffect)(()=>{d(s)},[s]),n)?(0,a.jsx)(j,{setIsConnected:d}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{iconSrc:"/assets/images/wallets.svg",alt:"wallets"}),(0,a.jsx)("p",{className:"mt-5 text-gray100 text-sm",children:"Select what wallet you want to connect below:"}),(0,a.jsx)(i.H,{className:"from-[#F5841F33] mt-8",label:"MetaMask",imageIcon:"/assets/images/modal/metamask-icon.svg",backgroundImage:"/assets/images/modal/metamask-bg.svg",onClick:()=>{m(),e({connector:t.find(e=>"injected"===e.id)})}}),(0,a.jsx)(i.H,{className:"from-[#3396FF] mt-3",label:"WalletConnect",backgroundImage:"/assets/images/modal/walletconnect-bg.svg",imageIcon:"/assets/images/modal/walletconnect-icon.svg",onClick:()=>{m(),e({connector:t.find(e=>"walletConnect"===e.id)})}})]})},j=e=>{let{setIsConnected:t}=e,{address:s,connector:l}=(0,r.Pk)(),[n,i]=(0,o.useState)(""),[c,d]=(0,o.useState)(),{setAddModalState:m}=N(),g=(0,o.useMemo)(()=>(null==l?void 0:l.id)==="injected"?{imageUrl:"/assets/images/modal/metamask-icon.svg",label:"Metamask",loadingImage:"/assets/images/modal/wallet-metamask-loading.svg"}:{imageUrl:"/assets/images/modal/walletconnect-icon.svg",label:"WalletConnect",loadingImage:"/assets/images/modal/wallet-connect-loading.svg"},[l]);return(0,a.jsx)(h,{setAddModalState:m,imageUrl:g.imageUrl,label:g.label,loadingImage:g.loadingImage,setWalletState:d,error:n,setError:i,setIsConnected:t})},v=()=>{let{connector:e}=(0,r.Pk)(),t=(0,o.useMemo)(()=>(null==e?void 0:e.id)==="injected"?{imageUrl:"/assets/images/modal/metamask-icon.svg",label:"Metamask",loadingImage:"/assets/images/modal/wallet-metamask-loading.svg"}:{imageUrl:"/assets/images/modal/walletconnect-icon.svg",label:"WalletConnect",loadingImage:"/assets/images/modal/wallet-connect-loading.svg"},[e]);return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"h-32 w-32 mx-auto bg-[#4C4C5C] border-2 border-space-green rounded-full relative flex items-center justify-center",children:[(0,a.jsx)(l.Z,{iconSrc:t.imageUrl,alt:t.label,width:"60px",height:"60px"}),(0,a.jsx)(l.Z,{iconSrc:"/assets/images/check-circle-space-green.svg",alt:"check green",className:"absolute -right-2 bottom-4",width:"28px",height:"28px"})]}),(0,a.jsxs)("p",{className:"font-semibold justify-center text-space-green flex items-center mt-8",children:[(0,a.jsx)(l.Z,{iconSrc:"/assets/images/check-circle-space-green.svg",alt:"check green",className:"mr-2",width:"20px",height:"20px"}),"Connected!"]}),(0,a.jsx)("p",{className:"mt-2 text-gray100 text-sm mb-10",children:"Your wallet connected successfully!"})]})})};var w=()=>{let{isAddModalOpen:e,setIsAddModalOpen:t,addModalState:s,duplicateWalletRaiseError:l}=N(),{setHoldUserLogout:i}=(0,d.useUserProfileContext)();return(0,o.useEffect)(()=>{e||i(!1)},[e,i]),(0,a.jsx)(n.Z,{size:"small",title:l?"Add New Wallet":"Add Or Switch Wallet",closeModalHandler:()=>t(!1),isOpen:e,children:(0,a.jsx)("div",{className:"flex flex-col items-center justify-center pt-12",children:"complete"===s?(0,a.jsx)(v,{}):(0,a.jsx)(f,{})})})},y=s(30522);let b=(0,o.createContext)({isAddModalOpen:!1,setIsAddModalOpen:y.tB,setAddModalState:y.tB,addModalState:"",duplicateWalletRaiseError:!1,setDuplicateWalletRaiseError:y.tB}),N=()=>(0,o.useContext)(b);var S=e=>{let{children:t}=e,[s,l]=(0,o.useState)(!1),[n,i]=(0,o.useState)(""),[r,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{s&&i("idle")},[s]),(0,a.jsxs)(b.Provider,{value:{isAddModalOpen:s,setIsAddModalOpen:l,addModalState:n,setAddModalState:i,duplicateWalletRaiseError:r,setDuplicateWalletRaiseError:c},children:[t,(0,a.jsx)(w,{})]})}},59367:function(e,t,s){s.d(t,{j:function(){return a}});let a=()=>"undefined"==typeof document?{}:document.cookie.split(";").reduce((e,t)=>{let[s,a]=t.trim().split("=");return e[s]=a,e},{})}}]);